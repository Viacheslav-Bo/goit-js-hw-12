{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/img/icons.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImagesByQuery(query, page) {\n  const result = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '53154523-05709ccc1510dd918919f2375',\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: 15,\n      page: page,\n    },\n  });\n  console.log(result.data.hits);\n\n  return result.data;\n}\n\n// =====================ЗРОБЛНО===========================\n// У файлі pixabay-api.js зберігай функції для виконання HTTP-запитів:\n// getImagesByQuery(query, page). Ця функція повинна приймати два параметри\n// query (пошукове слово, яке є рядком) та page (номер сторінки, яка є числом),\n//  здійснювати HTTP-запит і повертати значення властивості data з отриманої відповіді.\n// Pixabay API підтримує пагінацію та надає параметри page і per_page.\n// Зроби так, щоб у кожній відповіді при пошуку зображень приходило 15 об'єктів\n// (за замовчуванням 20).\n// Початкове значення параметра page повинно бути 1.\n\n// =====================В ПРОЦЕСІ===========================\n// З кожним наступним запитом його необхідно збільшити на 1.\n// У разі пошуку за новим ключовим словом значення page потрібно повернути до початкового,\n// оскільки буде пагінація для нової колекції зображень.\n","export default \"__VITE_ASSET__CMaiXz4u__\"","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport sprite from '../img/icons.svg';\n\nconst loader = document.querySelector('.loader');\nconst gallery = document.querySelector('.gallery');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\n// ===========================================================\n// БІБЛІОТЕКА lightbox\nlet lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n// ===========================================================\n// СТВОРЕННЯ РОЗМІТКИ\nexport function createGallery(images) {\n  return images\n    .map(function (img) {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = img;\n      return `<li class=\"gallery-item\">\n            <div class=\"gallery-img-container\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img class=\"image\" src=\"${webformatURL}\" alt=\"${tags}\" data-source=\"${largeImageURL}\"  /></a>\n            </div>\n            <div class=\"desc-container\">\n              <ul class=\"desc-list\">\n              <li class=\"icons\"><svg class=\"icon\" width=\"24\" height=\"24\">\n            <use href=\"${sprite}#icon-like\"></use>\n          </svg><span>${likes}</span></li>\n              <li class=\"icons\"><svg class=\"icon\" width=\"24\" height=\"24\">\n            <use href=\"${sprite}#icon-views\"></use>\n          </svg><span>${views}</span></li>\n              <li class=\"icons\"><svg class=\"icon\" width=\"24\" height=\"24\">\n            <use href=\"${sprite}#icon-comments\"></use>\n          </svg><span>${comments}</span></li>\n              <li class=\"icons\"><svg class=\"icon\" width=\"24\" height=\"24\">\n            <use href=\"${sprite}#icon-downloads\"></use>\n          </svg><span>${downloads}</span></li>\n              </ul>\n            </div>\n          </li>`;\n    })\n    .join('');\n}\n// ===========================================================\n// ВТАВКА РОЗМІТКИ В DOM\nexport function makeMarkup(res) {\n  if (res.length === 0) {\n    iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      backgroundColor: 'rgb(255, 215, 163)',\n    });\n    return;\n  }\n\n  const markup = createGallery(res);\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n// ===========================================================\n// ДОДАТКОВІ ФУНКЦІЇ\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.add('is-shown');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('is-shown');\n}\n\nexport function showLoadMoreButton() {\n  btnLoadMore.classList.add('btn-is-shown');\n}\n\nexport function hideLoadMoreButton() {\n  btnLoadMore.classList.remove('btn-is-shown');\n}\n","import { getImagesByQuery } from './js/pixabay-api.js';\nimport {\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n  makeMarkup,\n  createGallery,\n} from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ===================================================================\n// БАЗА\nconst form = document.querySelector('.form');\nconst submitBtn = document.querySelector('button[type=submit]');\nconst input = document.querySelector('input[name=\"search-text\"]');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nlet userLookingFor = [];\nlet page = 1;\nconst perPage = 15;\n\nconst gallery = document.querySelector('.gallery');\nlet searchWord;\n\nsubmitBtn.disabled = true;\n\n// ===================================================================\n// ПОДІЯ інпут\ninput.addEventListener('input', evt => {\n  submitBtn.disabled = evt.target.value.trim() === '';\n});\n// ===================================================================\n// ===================================================================\n// ПОДІЯ CLICK LOADMORE\n\nbtnLoadMore.addEventListener('click', async evt => {\n  page += 1;\n\n  const res = await getImagesByQuery(searchWord, page);\n  const markup = createGallery(res.hits);\n  gallery.insertAdjacentHTML('beforeend', markup);\n});\n\n// ===================================================================\n// ПОДІЯ сабміт\nform.addEventListener('submit', async evt => {\n  try {\n    page = 1;\n    evt.preventDefault();\n    hideLoadMoreButton();\n    clearGallery();\n\n    searchWord = document\n      .querySelector('input[name=\"search-text\"]')\n      .value.trim();\n\n    // userLookingFor.push(searchWord);\n    // console.log(userLookingFor);\n\n    if (!searchWord) {\n      return;\n    }\n\n    showLoader();\n\n    const res = await getImagesByQuery(searchWord, page);\n    console.log('res', res, page);\n\n    makeMarkup(res.hits);\n\n    hideLoader();\n    // const total_pages = Math.ceil(res.totalHits / perPage);\n    // console.log(total_pages);\n\n    if (res.totalHits > perPage) {\n      showLoadMoreButton();\n    } else if (res.hits.length < perPage && res.hits.length !== 0) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results. Total images found: ${res.totalHits}.`,\n        position: 'topRight',\n        backgroundColor: 'rgb(255, 215, 163)',\n      });\n    }\n\n    form.reset();\n    submitBtn.disabled = true;\n  } catch (error) {\n    console.log(error);\n  }\n});\n\n// =====================ЗРОБЛНО===========================\n// при сабміті форми тобі необхідно зберігати те, що ввів користувач у глобальну змінну.\n// Поки в галерії нема зображень, кнопка повинна бути прихована.\n// Після того як у галереї з'являються зображення, кнопка з'являється в інтерфейсі під галереєю.\n// При повторному сабміті форми кнопка спочатку ховається, а після отримання результатів\n// запиту знову відображається за потреби.\n\n// У відповіді бекенд повертає властивість totalHits — загальна кількість зображень,\n// які відповідають критерію пошуку (для безкоштовного акаунту). Якщо користувач дійшов\n// до кінця колекції, ховай кнопку Load more і виводь повідомлення з наступним текстом.\n// We're sorry, but you've reached the end of search results.\n\n// Зверни увагу, що кінець колекції може бути і на 1й сторінці, і на подальших.\n\n// Коли користувач отримує результати за максимально можливою сторінкою для конкретного пошукового\n// слова, тобто вже немає чого підвантажувати, кнопка Load more зникає і з’являється відповідне\n// повідомлення\n\n// =====================В ПРОЦЕСІ===========================\n// Перенеси індикатор завантаження під кнопку завантаження додаткових зображень.\n\n// Після додавання нових елементів до списку зображень на екземплярі SimpleLightbox викликається\n// метод refresh()\n\n// При кожному новому сабміті форми номер сторінки скидається до дефолтного 1 і результати\n// попередніх запитів зникають\n\n// логіку прокручування сторінки (scroll) робимо саме в цьому файлі.\n// Зроби плавне прокручування сторінки після запиту і відтворення кожної наступної групи зображень.\n// Для цього отримай у коді висоту однієї карточки галереї, використовуючи функцію\n// getBoundingClientRect. Після цього використовуй метод window.scrollBy для прокрутки\n// сторінки на дві висоти карточки галереї.\n"],"names":["getImagesByQuery","query","page","result","axios","sprite","loader","gallery","btnLoadMore","lightbox","SimpleLightbox","createGallery","images","img","webformatURL","largeImageURL","tags","likes","views","comments","downloads","makeMarkup","res","iziToast","markup","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","submitBtn","input","perPage","searchWord","evt","error"],"mappings":"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"}